# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ API –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Ä–∞—á–µ–π

## –ß—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–æ

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω endpoint –≤ YClientsAPI
- **–ë—ã–ª–æ:** `staff/{company_id}`
- **–°—Ç–∞–ª–æ:** `company/{company_id}/staff` (—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–º—É API)

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –∑–∞–≥–æ–ª–æ–≤–æ–∫ Authorization
- –¢–µ–ø–µ—Ä—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫: `Bearer r9ybfmkgm4u8nau7ehx4, User 5a647b231213538f72f76e09f539a9c9`
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–∞ –∏ user —Ç–æ–∫–µ–Ω–∞

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è get_doctors
–¢–µ–ø–µ—Ä—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∑–Ω–∞—á–∏–º—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é:
- `name` - –∏–º—è –≤—Ä–∞—á–∞
- `position` - –¥–æ–ª–∂–Ω–æ—Å—Ç—å (–∏–∑ –ø–æ–ª—è position.title)
- `description` - –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Ä–∞—á–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å)

### 4. –£–±—Ä–∞–Ω—ã –≤—Å–µ –∑–∞–≥–ª—É—à–∫–∏
- –ü–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–µ–Ω—ã –º–æ–∫–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ä–µ–∞–ª—å–Ω—ã–π YClients API
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ API

### 5. –î–æ–±–∞–≤–ª–µ–Ω–æ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–∞—á–µ–π:** 24 —á–∞—Å–∞ –≤ –ø–∞–º—è—Ç–∏
- **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ª—É–≥:** 1 —á–∞—Å –≤ –ø–∞–º—è—Ç–∏  
- –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –∏—Å—Ç–µ–∫—à–∏—Ö –∑–∞–ø–∏—Å–µ–π
- –ú–µ—Ç–æ–¥—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—Å–µ–º–∏ –∫–µ—à–∞–º–∏

### 6. –î–æ–±–∞–≤–ª–µ–Ω–∞ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
- **HTTP –∞–¥–º–∏–Ω-—Å–µ—Ä–≤–µ—Ä** –Ω–∞ –ø–æ—Ä—Ç—É 8080
- **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–µ—à–∞–º–∏
- **REST API** –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

## –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ –¥–ª—è GPT

```json
{
  "doctors": [
    {
      "name": "–ò–≤–∞–Ω–æ–≤–∞ –ê–Ω–Ω–∞ –ü–µ—Ç—Ä–æ–≤–Ω–∞",
      "position": "–í—Ä–∞—á-—Ç–µ—Ä–∞–ø–µ–≤—Ç",
      "description": "–û–ø—ã—Ç–Ω—ã–π —Å—Ç–æ–º–∞—Ç–æ–ª–æ–≥-—Ç–µ—Ä–∞–ø–µ–≤—Ç —Å 10-–ª–µ—Ç–Ω–∏–º —Å—Ç–∞–∂–µ–º"
    },
    {
      "name": "–ü–µ—Ç—Ä–æ–≤ –ú–∏—Ö–∞–∏–ª –°–µ—Ä–≥–µ–µ–≤–∏—á", 
      "position": "–í—Ä–∞—á-—Ö–∏—Ä—É—Ä–≥"
    }
  ]
}
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–∞ –≤—Ä–∞—á–µ–π
```bash
make test-doctors
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
```bash
# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–µ—à–∞ –≤—Ä–∞—á–µ–π
make test-cache

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–µ—à–∞ —É—Å–ª—É–≥
make test-services-cache

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∫–µ—à–µ–π
make test-all-cache
```

### –ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é
```bash
python3 test_doctors_api.py
python3 test_doctors_cache.py
python3 test_services_cache.py
```

### –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ .env
```
YCLIENTS_TOKEN=r9ybfmkgm4u8nau7ehx4
YCLIENTS_USER_TOKEN=5a647b231213538f72f76e09f539a9c9
YCLIENTS_COMPANY_ID=1483482
YCLIENTS_LOGIN=your_login (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
YCLIENTS_PASSWORD=your_password (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```

### –ó–∞–ø—É—Å–∫ —Å—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –±–æ—Ç–∞

```bash
# –° OpenAI Realtime API –∏ YClients –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π
python3 dental_bot.py

# –ò–ª–∏ —á–µ—Ä–µ–∑ make
make run-dental
```

## –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

### –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
```bash
# –û—Ç–∫—Ä—ã—Ç—å –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ
make admin

# –ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é
open http://localhost:8080
```

### API –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
```bash
# –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –∫–µ—à–∏
curl -X POST http://localhost:8080/cache/clear

# –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
curl http://localhost:8080/cache/stats

# –û–±–Ω–æ–≤–∏—Ç—å –∫–µ—à–∏
curl -X POST http://localhost:8080/cache/refresh

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
curl http://localhost:8080/health
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–¥–º–∏–Ω API
```bash
make test-admin
# –∏–ª–∏
python3 test_admin_api.py
```

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ .env —Ñ–∞–π–ª—É

```env
# Telegram Bot
TG_BOT_TOKEN=your_telegram_bot_token

# OpenAI Realtime API
OPENAI_API_KEY=sk-your_openai_key

# YClients API (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
YCLIENTS_TOKEN=r9ybfmkgm4u8nau7ehx4
YCLIENTS_USER_TOKEN=5a647b231213538f72f76e09f539a9c9
YCLIENTS_COMPANY_ID=1483482

# YClients User Token (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± —á–µ—Ä–µ–∑ –ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å)
YCLIENTS_LOGIN=your_login
YCLIENTS_PASSWORD=your_password

# –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
ADMIN_PORT=8080
```

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç tool –≤ –±–æ—Ç–µ

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç: "–ü–æ–∫–∞–∂–∏—Ç–µ –≤–∞—à–∏—Ö –≤—Ä–∞—á–µ–π"
2. GPT –≤—ã–∑—ã–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é `get_doctors`
3. –§—É–Ω–∫—Ü–∏—è –¥–µ–ª–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å –∫ YClients API
4. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∏–º—è, –¥–æ–ª–∂–Ω–æ—Å—Ç—å –∏ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Ä–∞—á–µ–π
5. GPT —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

–ù–∏–∫–∞–∫–∏—Ö –∑–∞–≥–ª—É—à–µ–∫ –∏–ª–∏ –º–æ–∫–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –±–æ–ª—å—à–µ –Ω–µ—Ç!

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è

### üöÄ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- **–í—Ä–∞—á–∏:** –ü–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å ~1-2 —Å–µ–∫, –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ ~0.01 —Å–µ–∫ (—É—Å–∫–æ—Ä–µ–Ω–∏–µ –≤ 100-200 —Ä–∞–∑!)
- **–£—Å–ª—É–≥–∏:** –ü–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å ~0.5-1 —Å–µ–∫, –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ ~0.01 —Å–µ–∫ (—É—Å–∫–æ—Ä–µ–Ω–∏–µ –≤ 50-100 —Ä–∞–∑!)
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ —Å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

### üí∞ **–≠–∫–æ–Ω–æ–º–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤:**
- –°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ YClients API
- –£–º–µ–Ω—å—à–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≤–µ—Ç–∞ –±–æ—Ç–∞
- –õ—É—á—à–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç

### üîÑ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- **–í—Ä–∞—á–∏:** TTL 24 —á–∞—Å–∞ (–æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ)
- **–£—Å–ª—É–≥–∏:** TTL 1 —á–∞—Å (–æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∫–∞–∂–¥—ã–π —á–∞—Å)
- –ê–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∞ –∏—Å—Ç–µ–∫—à–∏—Ö –∑–∞–ø–∏—Å–µ–π –∫–∞–∂–¥—ã–µ 6 —á–∞—Å–æ–≤
- –§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç —Ä–∞–±–æ—Ç—É –±–æ—Ç–∞

### üìä **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–µ—à–∞
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ø–∞–¥–∞–Ω–∏–π/–ø—Ä–æ–º–∞—Ö–æ–≤
- –ö–æ–Ω—Ç—Ä–æ–ª—å —Ä–∞–∑–º–µ—Ä–∞ –∫–µ—à–∞
