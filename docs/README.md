# ü§ñ Telegram Bot Local Development Template

–ì–æ—Ç–æ–≤—ã–π —à–∞–±–ª–æ–Ω –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ Telegram-–±–æ—Ç–æ–≤ —Å —Ç—Ä–µ–º—è –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏: 
- **python-telegram-bot v21+** (–±–∞–∑–æ–≤—ã–π)
- **aiogram v3** (–±–∞–∑–æ–≤—ã–π) 
- **aiogram v3 + OpenAI Realtime API** (–ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π —Å AI –∏ —Å—Ç—Ä–∏–º–∏–Ω–≥–æ–º) üÜï

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏](#-–æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏)
- [–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è](#-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#-–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
- [–í–∞—Ä–∏–∞–Ω—Ç—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏](#-–≤–∞—Ä–∏–∞–Ω—Ç—ã-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)
- [–ö–æ–º–∞–Ω–¥—ã Makefile](#-–∫–æ–º–∞–Ω–¥—ã-makefile)
- [–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è](#-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ-–æ–∫—Ä—É–∂–µ–Ω–∏—è)
- [–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞](#-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)
- [–õ–∏–Ω—Ç–∏–Ω–≥ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#-–ª–∏–Ω—Ç–∏–Ω–≥-–∏-—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
- [–ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏](#-–ø–æ–ª–µ–∑–Ω—ã–µ-—Å—Å—ã–ª–∫–∏)

## ‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- üêç **Python 3.11+** - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è Python
- üì¶ **Poetry** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ –∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º –æ–∫—Ä—É–∂–µ–Ω–∏–µ–º
- üîÑ **Long Polling** - –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–µ–±—Ö—É–∫–æ–≤
- üéØ **–î–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞** - python-telegram-bot –∏ aiogram –≤ –æ–¥–Ω–æ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
- üõ†Ô∏è **Makefile** - —É–¥–æ–±–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- üîç **–õ–∏–Ω—Ç–∏–Ω–≥** - ruff –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞
- üìù **–¢–∏–ø–∏–∑–∞—Ü–∏—è** - mypy –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∏–ø–æ–≤
- üåç **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è** - –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤
- üßπ **–ì–æ—Ç–æ–≤—ã–µ —Ö—ç–Ω–¥–ª–µ—Ä—ã** - –±–∞–∑–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –∏–∑ –∫–æ—Ä–æ–±–∫–∏

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Python 3.11+**
- **Poetry** ([–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ](https://python-poetry.org/docs/#installation))
- **–¢–æ–∫–µ–Ω –±–æ—Ç–∞** –æ—Ç [@BotFather](https://t.me/BotFather)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Poetry (–µ—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)

```bash
# macOS/Linux
curl -sSL https://install.python-poetry.org | python3 -

# Windows (PowerShell)
(Invoke-WebRequest -Uri https://install.python-poetry.org -UseBasicParsing).Content | py -
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

```bash
# –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone <repository-url>
cd telegram-bot-local-dev

# –ü–æ–ª–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ (—É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π + –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ .env)
make setup
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–æ–∫–µ–Ω–∞ –±–æ—Ç–∞

```bash
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª .env –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤–∞—à —Ç–æ–∫–µ–Ω
nano .env

# –ò–ª–∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω –Ω–∞–ø—Ä—è–º—É—é:
echo "BOT_TOKEN=your_actual_bot_token_here" > .env
```

### 3. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

**–í–∞—Ä–∏–∞–Ω—Ç A: python-telegram-bot**
```bash
make run-ptb
```

**–í–∞—Ä–∏–∞–Ω—Ç B: aiogram**
```bash
make run-aiogram
```

**–í–∞—Ä–∏–∞–Ω—Ç C: aiogram + OpenAI Realtime API** üÜï
```bash
# –î–æ–±–∞–≤—å—Ç–µ OPENAI_API_KEY –≤ .env
echo "OPENAI_API_KEY=sk-your_key_here" >> .env

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—É—é –≤–µ—Ä—Å–∏—é
make run-realtime
```

### 4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–û—Ç–ø—Ä–∞–≤—å—Ç–µ –±–æ—Ç—É —Å–æ–æ–±—â–µ–Ω–∏–µ `/start` –≤ Telegram, –∏ –æ–Ω –æ—Ç–≤–µ—Ç–∏—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ–º!

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
telegram-bot-local-dev/
‚îú‚îÄ‚îÄ üìÑ README.md              # –≠—Ç–æ—Ç —Ñ–∞–π–ª (–±–∞–∑–æ–≤–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
‚îú‚îÄ‚îÄ üìÑ README-REALTIME.md     # –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ Realtime API üÜï
‚îú‚îÄ‚îÄ üìÑ .gitignore             # –ò—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è Git
‚îú‚îÄ‚îÄ üìÑ .env.sample            # –®–∞–±–ª–æ–Ω –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ üìÑ .env                   # –í–∞—à–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
‚îú‚îÄ‚îÄ üìÑ pyproject.toml         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Poetry –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
‚îú‚îÄ‚îÄ üìÑ requirements.txt       # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è pip üÜï
‚îú‚îÄ‚îÄ üìÑ Makefile               # –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–æ–º
‚îú‚îÄ‚îÄ üìÅ ptb/                   # Python Telegram Bot —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (–±–∞–∑–æ–≤–∞—è)
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ __init__.py
‚îÇ   ‚îî‚îÄ‚îÄ üìÑ main.py            # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –±–æ—Ç–∞ (PTB)
‚îú‚îÄ‚îÄ üìÅ aiogram/               # Aiogram —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (–±–∞–∑–æ–≤–∞—è)
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ __init__.py
‚îÇ   ‚îî‚îÄ‚îÄ üìÑ bot.py             # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –±–æ—Ç–∞ (aiogram)
‚îî‚îÄ‚îÄ üìÅ src/                   # –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å Realtime API üÜï
    ‚îú‚îÄ‚îÄ üìÅ config/            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
    ‚îú‚îÄ‚îÄ üìÅ realtime/          # OpenAI Realtime API –∫–ª–∏–µ–Ω—Ç
    ‚îú‚îÄ‚îÄ üìÅ telegram/          # Telegram handlers —Å —Å—Ç—Ä–∏–º–∏–Ω–≥–æ–º
    ‚îú‚îÄ‚îÄ üìÅ integrations/      # YCLIENTS API –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
    ‚îú‚îÄ‚îÄ üìÅ utils/             # –£—Ç–∏–ª–∏—Ç—ã (logger, throttler)
    ‚îî‚îÄ‚îÄ üìÑ app.py             # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```

## üîß –í–∞—Ä–∏–∞–Ω—Ç—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### A) python-telegram-bot v21+

**–§–∞–π–ª:** `ptb/main.py`

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- ‚úÖ –ó—Ä–µ–ª–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ —Å –±–æ–≥–∞—Ç–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π API
- ‚úÖ –£–¥–æ–±–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –∏ —Ö—ç–Ω–¥–ª–µ—Ä—ã
- ‚úÖ –û—Ç–ª–∏—á–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è –∏–∑ –∫–æ—Ä–æ–±–∫–∏

**–ó–∞–ø—É—Å–∫:**
```bash
make run-ptb
```

### B) aiogram v3

**–§–∞–π–ª:** `aiogram/bot.py`

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- ‚úÖ –°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
- ‚úÖ –ë—ã—Å—Ç—Ä–∞—è –∏ –ª–µ–≥–∫–æ–≤–µ—Å–Ω–∞—è
- ‚úÖ –£–¥–æ–±–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å —Ä–æ—É—Ç–µ—Ä–∞–º–∏
- ‚úÖ –û—Ç–ª–∏—á–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**–ó–∞–ø—É—Å–∫:**
```bash
make run-aiogram
```

### C) aiogram v3 + OpenAI Realtime API üÜï

**–§–∞–π–ª:** `src/app.py`

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- ‚úÖ **–°—Ç—Ä–∏–º–∏–Ω–≥ –æ—Ç–≤–µ—Ç–æ–≤** –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ —á–µ—Ä–µ–∑ WebSocket
- ‚úÖ **Function calling** —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ YCLIENTS API
- ‚úÖ **–£–º–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç** –¥–ª—è —Å—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–π –∫–ª–∏–Ω–∏–∫–∏
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–º–µ–Ω–∞** –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ **Rate limiting** –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ **Webhook –∏ polling** —Ä–µ–∂–∏–º—ã

**–ó–∞–ø—É—Å–∫:**
```bash
make run-realtime
```

**–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** [README-REALTIME.md](README-REALTIME.md)

## üõ†Ô∏è –ö–æ–º–∞–Ω–¥—ã Makefile

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
make help              # –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
make setup             # –ü–æ–ª–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
make install           # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
make run-ptb           # –ó–∞–ø—É—Å—Ç–∏—Ç—å python-telegram-bot –±–æ—Ç–∞
make run-aiogram       # –ó–∞–ø—É—Å—Ç–∏—Ç—å aiogram –±–æ—Ç–∞
make run-realtime      # –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞ —Å Realtime API üÜï
```

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏

```bash
make lint              # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–¥ –ª–∏–Ω—Ç–µ—Ä–∞–º–∏
make format            # –û—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
make type-check        # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∏–ø—ã —Å mypy
make check-all         # –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
make lint-fix          # –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–ª—è–µ–º—ã–µ –æ—à–∏–±–∫–∏
```

### –£—Ç–∏–ª–∏—Ç—ã

```bash
make clean             # –û—á–∏—Å—Ç–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
make show-env          # –ü–æ–∫–∞–∑–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (—Ç–æ–∫–µ–Ω —Å–∫—Ä—ã—Ç)
make poetry-shell      # –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å Poetry shell
make deps-update       # –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
make deps-export       # –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ requirements.txt
```

### –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

```bash
make dev-ptb           # –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ PTB (—Å –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ–º .env)
make dev-aiogram       # –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ aiogram (—Å –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ–º .env)
make dev-realtime      # –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ Realtime API (—Å –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ–º .env) üÜï
make test-realtime     # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Realtime API üÜï
make webhook-mode      # –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤ webhook —Ä–µ–∂–∏–º–µ (–ø—Ä–æ–¥–∞–∫—à–Ω) üÜï
```

## üåç –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ —Ñ–∞–π–ª–µ `.env`:

```bash
# Telegram Bot (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ)
TG_BOT_TOKEN=your_bot_token_here       # –¢–æ–∫–µ–Ω –æ—Ç @BotFather
BOT_TOKEN=your_bot_token_here          # –î–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å –±–∞–∑–æ–≤—ã–º–∏ –±–æ—Ç–∞–º–∏

# OpenAI Realtime API (–¥–ª—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–π –≤–µ—Ä—Å–∏–∏) üÜï
OPENAI_API_KEY=sk-your_key_here        # OpenAI API –∫–ª—é—á
REALTIME_MODEL=gpt-4o-realtime-preview # –ú–æ–¥–µ–ª—å Realtime API

# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
LOG_LEVEL=INFO                         # –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (DEBUG, INFO, WARNING, ERROR)
POLLING_TIMEOUT=10                     # –¢–∞–π–º–∞—É—Ç long polling (—Å–µ–∫—É–Ω–¥—ã)
REQUEST_TIMEOUT=30                     # –¢–∞–π–º–∞—É—Ç HTTP –∑–∞–ø—Ä–æ—Å–æ–≤ (—Å–µ–∫—É–Ω–¥—ã)

# –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–¥–ª—è Realtime API) üÜï
STREAM_THROTTLE_MS=300                 # –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è–º–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
RATE_LIMIT_REQUESTS=5                  # –ú–∞–∫—Å. –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
RATE_LIMIT_WINDOW=30                   # –û–∫–Ω–æ rate limiting –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
TG_WEBHOOK_URL=https://your-domain.com # URL –¥–ª—è webhook (–ø—Ä–æ–¥–∞–∫—à–Ω)
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –±–æ—Ç–∞

1. –ù–∞–π–¥–∏—Ç–µ [@BotFather](https://t.me/BotFather) –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/newbot`
3. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω –≤ `.env`

## üë®‚Äçüíª –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ö—ç–Ω–¥–ª–µ—Ä–æ–≤

**Python-telegram-bot:**
```python
async def new_command(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    await update.message.reply_text("–ù–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞!")

# –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
app.add_handler(CommandHandler("new", new_command))
```

**Aiogram:**
```python
@router.message(Command("new"))
async def new_command(message: Message) -> None:
    await message.answer("–ù–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞!")
```

### –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

–î–æ–±–∞–≤—å—Ç–µ –≤ `pyproject.toml`:
```toml
[tool.poetry.dependencies]
sqlalchemy = "^2.0.0"    # –î–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
aiosqlite = "^0.19.0"    # –î–ª—è SQLite
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ middleware (aiogram)

```python
from aiogram import BaseMiddleware

class LoggingMiddleware(BaseMiddleware):
    async def __call__(self, handler, event, data):
        # –í–∞—à–∞ –ª–æ–≥–∏–∫–∞
        return await handler(event, data)

# –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
dp.message.middleware(LoggingMiddleware())
```

## üîç –õ–∏–Ω—Ç–∏–Ω–≥ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Å **ruff** (–±—ã—Å—Ç—Ä—ã–π –ª–∏–Ω—Ç–µ—Ä –∏ —Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä) –∏ **mypy** (–ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤).

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è ruff

–í `pyproject.toml` –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã:
- ‚úÖ –î–ª–∏–Ω–∞ —Å—Ç—Ä–æ–∫–∏: 88 —Å–∏–º–≤–æ–ª–æ–≤
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∏: pycodestyle, pyflakes, isort, bugbear, comprehensions, pyupgrade
- ‚úÖ –ê–≤—Ç–æ—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –¥–≤–æ–π–Ω—ã–º–∏ –∫–∞–≤—ã—á–∫–∞–º–∏

### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–¥–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Å—å –∫–æ–¥
make lint

# –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–ª—è–µ–º—ã–µ –æ—à–∏–±–∫–∏
make lint-fix

# –û—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
make format

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∏–ø—ã
make type-check

# –í—ã–ø–æ–ª–Ω–∏—Ç—å –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
make check-all
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ IDE

**VS Code** (`.vscode/settings.json`):
```json
{
    "python.linting.enabled": true,
    "python.linting.ruffEnabled": true,
    "python.formatting.provider": "black",
    "python.defaultInterpreterPath": ".venv/bin/python"
}
```

**PyCharm:**
- File ‚Üí Settings ‚Üí Tools ‚Üí External Tools
- –î–æ–±–∞–≤—å—Ç–µ ruff –∫–∞–∫ external tool

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –í–∫–ª—é—á–µ–Ω–∏–µ debug –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
# –í .env —Ñ–∞–π–ª–µ
LOG_LEVEL=DEBUG
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Telegram API

```python
# –î–æ–±–∞–≤—å—Ç–µ –≤ –Ω–∞—á–∞–ª–æ main —Ñ—É–Ω–∫—Ü–∏–∏
bot_info = await bot.get_me()
logger.info(f"Bot info: {bot_info}")
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–û–±–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –≤–∫–ª—é—á–∞—é—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –æ—à–∏–±–æ–∫:
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–Ω—Å–æ–ª—å
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ –ø—Ä–æ–±–ª–µ–º–µ
- Graceful shutdown –ø—Ä–∏ Ctrl+C

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- üìñ [python-telegram-bot docs](https://docs.python-telegram-bot.org/)
- üìñ [aiogram docs](https://docs.aiogram.dev/)
- üìñ [Telegram Bot API](https://core.telegram.org/bots/api)
- üìñ [Poetry docs](https://python-poetry.org/docs/)

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

- üîß [Ruff](https://docs.astral.sh/ruff/) - –ª–∏–Ω—Ç–µ—Ä –∏ —Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä
- üîç [MyPy](https://mypy.readthedocs.io/) - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤
- ü§ñ [@BotFather](https://t.me/BotFather) - —Å–æ–∑–¥–∞–Ω–∏–µ –±–æ—Ç–æ–≤

### –ü—Ä–∏–º–µ—Ä—ã –∏ —Ç—É—Ç–æ—Ä–∏–∞–ª—ã

- üéØ [PTB Examples](https://github.com/python-telegram-bot/python-telegram-bot/tree/master/examples)
- üéØ [Aiogram Examples](https://github.com/aiogram/aiogram/tree/dev-3.x/examples)
- üìù [Telegram Bot Tutorial](https://core.telegram.org/bots/tutorial)

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

1. Fork —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2. –°–æ–∑–¥–∞–π—Ç–µ feature branch: `git checkout -b feature/amazing-feature`
3. Commit –∏–∑–º–µ–Ω–µ–Ω–∏—è: `git commit -m 'Add amazing feature'`
4. Push –≤ branch: `git push origin feature/amazing-feature`
5. –°–æ–∑–¥–∞–π—Ç–µ Pull Request

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT. –°–º. —Ñ–∞–π–ª `LICENSE` –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π.

## ‚ùì FAQ

**Q: –ö–∞–∫—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É –≤—ã–±—Ä–∞—Ç—å?**
A: 
- **–ù–∞—á–∏–Ω–∞—é—â–∏–º**: `python-telegram-bot` (–ø—Ä–æ—Å—Ç–∞—è)
- **–û–ø—ã—Ç–Ω—ã–º —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º**: `aiogram` (–±—ã—Å—Ç—Ä–∞—è)  
- **–î–ª—è AI-–ø—Ä–æ–µ–∫—Ç–æ–≤**: `aiogram + Realtime API` (–ø—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è) üÜï

**Q: –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ?**
A: –ù–µ—Ç, –∑–∞–ø—É—Å–∫–∞–π—Ç–µ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –±–æ—Ç –∑–∞ —Ä–∞–∑ —Å –æ–¥–Ω–∏–º —Ç–æ–∫–µ–Ω–æ–º.

**Q: –ù—É–∂–µ–Ω –ª–∏ OpenAI API –∫–ª—é—á –¥–ª—è –±–∞–∑–æ–≤—ã—Ö –≤–µ—Ä—Å–∏–π?**
A: –ù–µ—Ç, OpenAI API –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–π –≤–µ—Ä—Å–∏–∏ (`make run-realtime`).

**Q: –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –ª–∏ —Å—Ç—Ä–∏–º–∏–Ω–≥ –≤ –±–∞–∑–æ–≤—ã—Ö –≤–µ—Ä—Å–∏—è—Ö?**
A: –ù–µ—Ç, —Å—Ç—Ä–∏–º–∏–Ω–≥ –æ—Ç–≤–µ—Ç–æ–≤ –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –≤ –≤–µ—Ä—Å–∏–∏ —Å Realtime API.

**Q: –ö–∞–∫ –¥–µ–ø–ª–æ–∏—Ç—å –≤ –ø—Ä–æ–¥–∞–∫—à–Ω?**
A: –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –≤–µ—Ä—Å–∏—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç webhook —Ä–µ–∂–∏–º. –°–º. [README-REALTIME.md](README-REALTIME.md).

**Q: –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –ª–∏ –≤–µ–±—Ö—É–∫–∏?**
A: –î–∞, –≤ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–π –≤–µ—Ä—Å–∏–∏ –µ—Å—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫–∞ webhook –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞ (`make webhook-mode`).

---

<div align="center">
  <strong>üöÄ –£–¥–∞—á–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ Telegram-–±–æ—Ç–æ–≤! ü§ñ</strong>
</div>
